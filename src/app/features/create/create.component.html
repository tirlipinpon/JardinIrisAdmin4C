<div class="create-container">

  <!-- Composant d'affichage des performances en temps réel -->
  <app-performance-display></app-performance-display>

  <!-- Section d'affichage des erreurs -->
  <app-error-display 
    [errors]="store.error()" 
    (clearErrors)="clearErrors()">
  </app-error-display>

  <!-- Section de génération d'article -->
  <app-article-generation
    [articleIdea]="articleIdea"
    [isGenerating]="store.isGenerating()"
    [step]="store.step()"
    (generate)="generate()"
    (articleIdeaChange)="onArticleIdeaChange($event)">
  </app-article-generation>

  <!-- Statistiques de l'article -->
  <app-article-stats
    [article]="store.article()"
    [isGenerating]="store.isGenerating()"
    [canSave]="canSave()"
    [articleStats]="getArticleStats()"
    [internalImagesCount]="store.internalImages().length"
    [faqCount]="store.faq().length"
    [imageUrl]="store.image_url()"
    [video]="store.video()"
    [botanicalNamesCount]="getBotanicalNamesCount()"
    [internalLinksStats]="getInternalLinksStats()"
    (saveAllData)="saveAllData()"
    (showPerformanceStats)="showPerformanceStats()"
    (editImageUrl)="editImageUrl()">
  </app-article-stats>

  <!-- Section d'affichage de l'image principale -->
  <app-image-preview
    [imageUrl]="store.image_url()"
    [title]="store.titre()"
    (editImageUrl)="editImageUrl()"
    (openImageInNewTab)="openImageInNewTab()"
    (imageError)="onImageError($event)"
    (imageLoad)="onImageLoad($event)">
  </app-image-preview>

  <div class="editor-section" *ngIf="store.article()">
    <app-article-editor 
      [article]="store.article() || ''" 
      (articleChange)="onArticleChange($event)">
    </app-article-editor>
  </div>

  <!-- Section des formulaires éditables -->
  <div class="section" *ngIf="store.article()">
    <app-post-form-editor></app-post-form-editor>
  </div>
</div>
